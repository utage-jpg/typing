<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Socionics Type Compatibility</title>
<meta name="theme-color" content="#ff4fd8" />
<style>
:root{
  /* Dark theme colors - matching diagnostic tool */
  --bg-dark:#0b1020;
  --bg-medium:#121a33;
  --bg-light:#1a2341;
  --text-primary:#eaf0ff;
  --text-secondary:#a8b3d3;
  --text-muted:#6b7aa1;
  --panel-dark:rgba(26,35,65,0.8);
  --panel-light:rgba(255,255,255,0.08);
  --border-dark:rgba(255,255,255,0.1);
  --border-light:rgba(255,255,255,0.05);

  /* Quadra colors */
  --q-alpha:#ff5db1;
  --q-beta:#4aa3ff;
  --q-gamma:#ffd24a;
  --q-delta:#43e07a;

  /* Accent gradients */
  --hi:#ff5db1;
  --hi2:#4aa3ff;
  --hi3:#ffd24a;
  --hi4:#43e07a;

  /* Shadows and glows */
  --shadow-dark:0 20px 60px rgba(0,0,0,0.4);
  --shadow-glow:0 0 20px rgba(255,93,209,0.3);
}

*{box-sizing:border-box}
html,body{
  margin:0;
  background:radial-gradient(ellipse at top, rgba(255,93,209,0.15), transparent 40%),
            linear-gradient(180deg, var(--bg-dark) 0%, var(--bg-medium) 100%);
  color:var(--text-primary);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Sans","Noto Sans JP","Yu Gothic",Meiryo,sans-serif;
  min-height:100vh;
}

.wrap{
  max-width:900px;
  margin:0 auto;
  padding:20px 16px 40px;
}

h1{
  font-size:24px;
  margin:16px 0 24px;
  text-align:center;
  background:linear-gradient(135deg, var(--hi), var(--hi2));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  text-fill-color:transparent;
  letter-spacing:0.5px;
}

.card{
  background:var(--panel-dark);
  border:1px solid var(--border-dark);
  border-radius:16px;
  box-shadow:var(--shadow-dark), 0 0 30px rgba(255,93,209,0.1);
  backdrop-filter:blur(10px);
}

.hd{
  padding:16px 20px;
  border-bottom:1px solid var(--border-dark);
  font-weight:800;
  font-size:16px;
  color:var(--text-primary);
}

.body{
  padding:20px;
}

.small{
  font-size:13px;
  color:var(--text-secondary);
  margin-bottom:12px;
}

/* 相性UI */
.relgrid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  margin-bottom:20px;
}

@media(min-width:640px){
  .relgrid{grid-template-columns:repeat(4,1fr)}
}

.relbtn{
  padding:14px 8px;
  border:1px solid var(--border-dark);
  border-radius:12px;
  background:var(--panel-light);
  color:var(--text-primary);
  font-weight:700;
  font-size:15px;
  cursor:pointer;
  user-select:none;
  transition:all 0.2s ease;
  text-align:center;
  min-height:52px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
}

.relbtn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(255,93,209,0.2);
  border-color:var(--q-alpha);
}

.relbtn.sel{
  background:linear-gradient(135deg, rgba(255,93,209,0.2), rgba(74,163,255,0.1));
  border-color:var(--q-alpha);
  outline:2px solid rgba(255,93,209,0.4);
  outline-offset:2px;
  box-shadow:0 0 20px rgba(255,93,209,0.3), inset 0 0 20px rgba(255,93,209,0.1);
}

.relbtn .q{
  font-size:11px;
  color:var(--text-muted);
  margin-left:4px;
}

.badge{
  display:inline-flex;
  align-items:center;
  padding:6px 12px;
  border-radius:20px;
  background:var(--panel-light);
  border:1px solid var(--border-dark);
  font-size:13px;
  font-weight:600;
  color:var(--text-primary);
  margin:0 4px;
}

.reltitle{
  font-size:18px;
  font-weight:700;
  margin:16px 0 12px;
  color:var(--text-primary);
  padding:12px 16px;
  background:var(--panel-light);
  border-radius:12px;
  border:1px solid var(--border-dark);
}

#relDesc{
  background:var(--panel-light);
  border:1px solid var(--border-dark);
  border-radius:12px;
  padding:16px;
  margin:12px 0 0;
  font-size:14px;
  line-height:1.7;
  color:var(--text-primary);
  white-space:pre-wrap;
}

#relDesc:empty{
  display:none;
}

.btn{
  padding:8px 16px;
  border:1px solid var(--border-dark);
  border-radius:10px;
  background:var(--panel-light);
  color:var(--text-primary);
  font-weight:600;
  font-size:13px;
  cursor:pointer;
  user-select:none;
  transition:all 0.2s ease;
  margin:0 4px;
}

.btn:hover{
  background:var(--q-alpha);
  border-color:var(--q-alpha);
  transform:translateY(-1px);
}

.btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
  transform:none;
}

.qalpha{background:rgba(255,93,209,0.1);border-color:var(--q-alpha)}
.qbeta{background:rgba(74,163,255,0.1);border-color:var(--q-beta)}
.qgamma{background:rgba(255,210,74,0.1);border-color:var(--q-gamma)}
.qdelta{background:rgba(67,224,122,0.1);border-color:var(--q-delta)}
</style>
</head>
<body>

<div class="wrap">
  <h1>Socionics Type Compatibility</h1>
  
  <div class="card">
    <div class="hd">相性測定</div>
    <div class="body">
      <div class="small">手順：タイプBを選ぶと、固定タイプAとの関係名と説明が表示されます。</div>
      
      <div class="relgrid" id="relPicker"></div>
      
      <div class="small" style="margin-top:20px">
        選択中：<span id="pickA" class="badge">—</span> × <span id="pickB" class="badge">—</span>
        <button id="clear" class="btn">リセット</button>
      </div>
      
      <div class="reltitle" id="relTitle">関係名 —</div>
      <pre id="relDesc">2タイプを選ぶと説明が出ます。</pre>
    </div>
  </div>
</div>

<script>
/* ==== クアドラ/配色 ==== */
const QUADRA={ ILE:"Alpha", SEI:"Alpha", ESE:"Alpha", LII:"Alpha",
               EIE:"Beta",  LSI:"Beta",  SLE:"Beta",  IEI:"Beta",
               SEE:"Gamma", ILI:"Gamma", LIE:"Gamma", ESI:"Gamma",
               IEE:"Delta", SLI:"Delta", LSE:"Delta", EII:"Delta" };
const QSYM={Alpha:"α",Beta:"β",Gamma:"γ",Delta:"Δ"};
const QCLS=t=>({Alpha:"qalpha",Beta:"qbeta",Gamma:"qgamma",Delta:"qdelta"}[QUADRA[t]]||"");

/* 全タイプ */
const TYPES_ALL=["ILE","SEI","ESE","LII","EIE","LSI","SLE","IEI","SEE","ILI","LIE","ESI","LSE","EII","IEE","SLI"];

/* 相性マトリクス */
const RM={ 
  ILE:{ILE:"対称",SEI:"鏡",ESE:"半対",LII:"活動",EIE:"照応",LSI:"関係",SLE:"相補",IEI:"相補",SEE:"関係",ILI:"鏡",LIE:"半対",ESI:"活動",LSE:"照応",EII:"相補",IEE:"相補",SLI:"対称"},
  SEI:{ILE:"鏡",SEI:"同一",ESE:"照応",LII:"相補",EIE:"関係",LSI:"半対",SLE:"活動",IEI:"活動",SEE:"半対",ILI:"同一",LIE:"鏡",ESI:"相補",LSE:"関係",EII:"相補",IEE:"相補",SLI:"照応"},
  ESE:{ILE:"半対",SEI:"照応",ESE:"同一",LII:"鏡",EIE:"相補",LSI:"関係",SLE:"照応",IEI:"関係",SEE:"活動",ILI:"半対",LIE:"同一",ESI:"鏡",LSE:"相補",EII:"照応",IEE:"照応",SLI:"関係"},
  LII:{ILE:"活動",SEI:"相補",ESE:"鏡",LII:"同一",EIE:"半対",LSI:"照応",SLE:"関係",IEI:"関係",SEE:"照応",ILI:"相補",LIE:"活動",ESI:"鏡",LSE:"半対",EII:"相補",IEE:"相補",SLI:"対称"},
  EIE:{ILE:"照応",SEI:"関係",ESE:"相補",LII:"半対",EIE:"同一",LSI:"鏡",SLE:"活動",IEI:"活動",SEE:"鏡",ILI:"照応",LIE:"相補",ESI:"関係",LSE:"半対",EII:"相補",IEE:"相補",SLI:"照応"},
  LSI:{ILE:"関係",SEI:"半対",ESE:"関係",LII:"照応",EIE:"鏡",LSI:"同一",SLE:"照応",IEI:"照応",SEE:"半対",ILI:"関係",LIE:"関係",ESI:"鏡",LSE:"相補",EII:"照応",IEE:"照応",SLI:"対称"},
  SLE:{ILE:"相補",SEI:"活動",ESE:"照応",LII:"関係",EIE:"活動",LSI:"照応",SLE:"同一",IEI:"鏡",SEE:"鏡",ILI:"相補",LIE:"半対",ESI:"関係",LSE:"照応",EII:"関係",IEE:"関係",SLI:"照応"},
  IEI:{ILE:"相補",SEI:"活動",ESE:"関係",LII:"関係",EIE:"活動",LSI:"照応",SLE:"鏡",IEI:"同一",SEE:"照応",ILI:"相補",LIE:"関係",ESI:"照応",LSE:"半対",EII:"鏡",IEE:"鏡",SLI:"照応"},
  SEE:{ILE:"関係",SEI:"半対",ESE:"活動",LII:"照応",EIE:"鏡",LSI:"半対",SLE:"鏡",IEI:"照応",SEE:"同一",ILI:"関係",LIE:"照応",ESI:"活動",LSE:"相補",EII:"関係",IEE:"関係",SLI:"照応"},
  ILI:{ILE:"鏡",SEI:"同一",ESE:"半対",LII:"相補",EIE:"照応",LSI:"関係",SLE:"相補",IEI:"相補",SEE:"関係",ILI:"同一",LIE:"鏡",ESI:"相補",LSE:"照応",EII:"相補",IEE:"相補",SLI:"照応"},
  LIE:{ILE:"半対",SEI:"鏡",ESE:"同一",LII:"活動",EIE:"相補",LSI:"関係",SLE:"半対",IEI:"関係",SEE:"照応",ILI:"鏡",LIE:"同一",ESI:"活動",LSE:"照応",EII:"関係",IEE:"関係",SLI:"照応"},
  ESI:{ILE:"活動",SEI:"相補",ESE:"鏡",LII:"鏡",EIE:"関係",LSI:"鏡",SLE:"関係",IEI:"照応",SEE:"活動",ILI:"相補",LIE:"活動",ESI:"同一",LSE:"半対",EII:"照応",IEE:"照応",SLI:"対称"},
  LSE:{ILE:"照応",SEI:"関係",ESE:"相補",LII:"半対",EIE:"半対",LSI:"相補",SLE:"照応",IEI:"半対",SEE:"相補",ILI:"照応",LIE:"照応",ESI:"半対",LSE:"同一",EII:"相補",IEE:"相補",SLI:"対称"},
  EII:{ILE:"相補",SEI:"相補",ESE:"照応",LII:"相補",EIE:"相補",LSI:"照応",SLE:"関係",IEI:"鏡",SEE:"関係",ILI:"相補",LIE:"関係",ESI:"照応",LSE:"相補",EII:"同一",IEE:"鏡",SLI:"照応"},
  IEE:{ILE:"相補",SEI:"相補",ESE:"照応",LII:"相補",EIE:"相補",LSI:"照応",SLE:"関係",IEI:"鏡",SEE:"関係",ILI:"相補",LIE:"関係",ESI:"照応",LSE:"相補",EII:"鏡",IEE:"同一",SLI:"照応"},
  SLI:{ILE:"対称",SEI:"照応",ESE:"関係",LII:"対称",EIE:"照応",LSI:"対称",SLE:"照応",IEI:"照応",SEE:"照応",ILI:"照応",LIE:"照応",ESI:"対称",LSE:"対称",EII:"照応",IEE:"照応",SLI:"同一"}
};

const RNAME={
  "同一":"同一関係 - 最も自然で理解しやすい",
  "鏡":"鏡像関係 - 似ているが価値観が逆",
  "対称":"対称関係 - 異なる強みを持ち補完し合う",
  "半対":"半対称関係 - 一方が他方を理解しやすい",
  "照応":"照応関係 - 落ち着いた協力関係",
  "関係":"関係関係 - 活動的で互いを刺激し合う",
  "相補":"相補関係 - 弱みを補い合う最適パートナー"
};

/* 相性説明 */
function relText(a,b){
  const rel = RM[a][b];
  const base = RNAME[rel] || rel;
  const desc = {
    "同一":"同じタイプ同士。価値観や思考パターンが完全に一致し、最も自然な関係を築けます。互いの行動や感情を深く理解できますが、新たな視点を得る機会が少ないかもしれません。",
    "鏡":"同じ機能を持つが価値観が逆のタイプ。表面的には似ていますが、重要視する点が異なるため、互いの視点を学べます。協力しやすい一方、根本的な価値観の違いから摩擦も起こります。",
    "対称":"互いの強みが異なり、補完し合う関係。相手の得意分野を尊重し、協力することで高い相乗効果を生み出します。異なるアプローチから新たな学びが得られる理想的な関係です。",
    "半対称":"一方が他方を理解しやすい非対称な関係。理解する側は支援しやすく、される側は安心感を得られます。長期的にはバランスの取れた協力関係を築けます。",
    "照応":"落ち着いた安定した関係。互いのペースを尊重し、無理なく協力できます。衝突が少なく、長期的な信頼関係を築きやすいです。日常生活での相性が良好です。",
    "関係":"活動的で互いを刺激し合う関係。共通の目標に向かって協力し、互いのモチベーションを高め合えます。ただし、意見の相違から激しい議論になることもあります。",
    "相補":"互いの弱みを補い合う最適なパートナー関係。相手の不得手な分野を自然にサポートでき、全体としての能力が最大化されます。最も調和の取れた相性です。"
  };
  return `${base}\n\n${desc[rel] || ""}`;
}

/* UI変数 */
let A = null;
let B = null;

/* タイプB選択UIを生成 */
function pickRel(){
  const relPicker = document.getElementById('relPicker');
  relPicker.innerHTML = TYPES_ALL.map(t=>`
    <div class="relbtn ${QCLS(t)}" data-type="${t}">
      ${t}<span class="q">${QSYM[QUADRA[t]]}</span>
    </div>
  `).join('');
  
  relPicker.querySelectorAll('.relbtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const t = btn.getAttribute('data-type');
      B = t;
      updateUI();
      showRel();
    });
  });
}

/* UI更新 */
function updateUI(){
  document.getElementById('pickA').textContent = A || '—';
  document.getElementById('pickB').textContent = B || '—';
  
  document.querySelectorAll('.relbtn').forEach(btn=>{
    const t = btn.getAttribute('data-type');
    btn.classList.toggle('sel', t === B);
  });
}

/* 相性表示 */
function showRel(){
  if(!A || !B) return;
  
  const rel = RM[A][B];
  document.getElementById('relTitle').textContent = `${A} × ${B}：${rel}`;
  document.getElementById('relDesc').textContent = relText(A,B);
}

/* クリアボタン */
document.getElementById('clear').addEventListener('click',()=>{
  B = null;
  updateUI();
  document.getElementById('relTitle').textContent = '関係名 —';
  document.getElementById('relDesc').textContent = '2タイプを選ぶと説明が出ます。';
});

/* 初期化 */
function init(){
  // URLクエリからタイプAを取得
  const qs = new URLSearchParams(location.search);
  const A0 = (qs.get("type") || "").toUpperCase();
  
  // 有効なタイプなら設定、なければデフォルト
  A = TYPES_ALL.includes(A0) ? A0 : "ILE";
  
  // UI初期化
  pickRel();
  updateUI();
}

// ページ読み込み時に初期化
init();
</script>

</body>
</html>
